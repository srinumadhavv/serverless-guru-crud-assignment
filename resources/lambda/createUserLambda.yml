name: create-user-${self:provider.stage}
handler: src/lambdas/createUser/index.handler
layers:
  - { "Ref":  NodejsLambdaLayer}
events: #this event will trigger defined lambda here to create User in table
  - http:
      path: /User
      method: POST
      cors: true
iamRoleStatements:
  - Effect: Allow
    Action:
      - dynamodb:PutItem
      - dynamodb:Query
    Resource:
      - { Fn::GetAtt: [UserTable, Arn] }
      - { Fn::Join: [ "/", [ Fn::GetAtt: [UserTable, Arn], "index/*" ] ] }